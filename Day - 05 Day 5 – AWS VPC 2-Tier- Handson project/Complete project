# ğŸš€ Day 5 â€“ AWS VPC 2-Tier Architecture | #100DaysOfMultiCloud

Welcome to Day 5 of my Multi-Cloud series!  
In this project, Iâ€™ve built a **real-world 2-tier network architecture** in **AWS** â€” from scratch â€” just like real companies do in production.

By following this, you'll understand:
- How to build a custom AWS VPC
- How subnetting, routing, and NAT work
- How to securely deploy frontend & backend EC2 instances

---

## ğŸ“ Architecture Overview

VPC: 10.0.0.0/16
â”œâ”€â”€ Public Subnet (10.0.1.0/24)
â”‚ â””â”€â”€ EC2: frontend (Apache)
â”‚ â””â”€â”€ Internet Gateway
â”œâ”€â”€ Private Subnet (10.0.2.0/24)
â””â”€â”€ EC2: backend (Flask)
â””â”€â”€ NAT Gateway â†’ Internet (Outbound-only)


---

## ğŸ› ï¸ AWS Services Used

- âœ… VPC (Virtual Private Cloud)
- âœ… Public + Private Subnets
- âœ… Internet Gateway (IGW)
- âœ… NAT Gateway + Elastic IP
- âœ… Route Tables (public & private)
- âœ… Security Groups
- âœ… EC2 Instances (Frontend + Backend)
- âœ… User Data scripts
- âœ… Testing via curl + SSH

---

## ğŸ§­ Step-by-Step Setup

### ğŸ”¹ VPC
- CIDR: `10.0.0.0/16`
- Name: `day4-vpc`

### ğŸ”¹ Subnets
- `public-subnet-a` â†’ `10.0.1.0/24` (Enable auto-assign Public IP)
- `private-subnet-a` â†’ `10.0.2.0/24`

### ğŸ”¹ Internet Gateway
- Name: `day4-igw`
- Attach to VPC

### ğŸ”¹ Elastic IP
- Tag: `day4-nat-eip`

### ğŸ”¹ NAT Gateway
- Name: `day4-nat-gw`
- Subnet: `public-subnet-a`
- EIP: `day4-nat-eip`

---

## ğŸŒ Route Tables

### Public RT
- Name: `public-rt`
- Route: `0.0.0.0/0 â†’ IGW`
- Associate with: `public-subnet-a`

### Private RT
- Name: `private-rt`
- Route: `0.0.0.0/0 â†’ NAT Gateway`
- Associate with: `private-subnet-a`

---

## ğŸ” Security Groups

### `frontend-sg`
- Inbound:
  - HTTP (80) â†’ `0.0.0.0/0`
  - SSH (22) â†’ `your-ip/32`
- Outbound: All traffic allowed

### `backend-sg`
- Inbound:
  - TCP (8080) â†’ Source: `frontend-sg`
- Outbound: All traffic allowed

---

## ğŸ’» EC2 Instances

### Frontend EC2 (Apache in public subnet)
- Name: `frontend-ec2`
- Subnet: `public-subnet-a`
- SG: `frontend-sg`
- Public IP: Enabled

**User Data Script:**
```bash
#!/bin/bash
yum update -y || dnf update -y
yum install -y httpd || dnf install -y httpd
echo "AWS Frontend Server - Day 4 Multi-Cloud" > /var/www/html/index.html
systemctl enable httpd
systemctl start httpd


---
Backend EC2 (Flask in private subnet)

Name: backend-ec2

Subnet: private-subnet-a

SG: backend-sg

Public IP: Disabled

User Data Script:
#!/bin/bash
dnf update -y || yum update -y
dnf install -y python3 || yum install -y python3
pip3 install flask || python3 -m pip install flask
cat << 'EOF' > /home/ec2-user/app.py
from flask import Flask
app = Flask(__name__)
@app.route("/")
def home():
    return "Hello from AWS Backend in Private Subnet"
if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8080)
EOF
nohup python3 /home/ec2-user/app.py &

---

Testing
âœ… Frontend Access

Open browser â†’
http://<frontend-public-ip>
ex: ssh -i day5-key.pem ec2-user@<frontend-public-ip>
Expected Output: â€œAWS Frontend Server - Day 4 Multi-Cloudâ€

âœ… SSH into Frontend 
From frontend EC2:
curl http://<backend-private-ip>:8080
Expected Output: â€œHello from AWS Backend in Private Subnetâ€

âœ…Backend Outbound (via NAT)

SSH into backend from frontend, then:
curl ifconfig.me
Expected: Public IP of NAT Gatewa

---

ğŸ“ Key Concepts Reinforced

âœ… CIDR Planning & Subnetting

âœ… IGW vs NAT Gateway usage

âœ… Route Table separation (public vs private)

âœ… Least privilege access with Security Groups

âœ… EC2 automation with User Data scripts

---

ğŸŒ Connect With Me

---

## ğŸ”— Project Resources

- YouTube: https://youtu.be/TVPwoVW4wys?si=JonG69C9250OUobg
- LinkedIn: https://www.linkedin.com/in/venkatasrihari/
- GitHub Repo : https://github.com/Consultantsrihari/100DaysOfMultiCloud
- LinkedIn: https://www.linkedin.com/in/venkatasrihari/
- Project PDF: https://docs.google.com/document/d/105JOmoK8LCzE0whwOJcMFiQTscf2_t9LEPtJnVzYm_A/edit?tab=t.0


---

